<p align="center">
  <img src="https://www.elastic.co/favicon.svg" alt="elasticsearch-mcp-server" hight="15%" width="15%">
</p>
<h1 align="center">Elasticsearch MCP Server<h1>
<h4 align="center">ææ˜“éƒ¨ç½² â€¢ é«˜æ€§èƒ½ â€¢ ä½å†…å­˜å ç”¨ â€¢ äº‘åŸç”Ÿæ”¯æŒ â€¢Javaç‰ˆæœ¬çš„Elasticsearch MCPæœåŠ¡</h4>
[![Java 17](https://img.shields.io/badge/Java-17-blue.svg)](https://openjdk.org/projects/jdk/17/)
[![Quarkus](https://img.shields.io/badge/Quarkus-3.27.0-blue.svg)](https://quarkus.io/)
[![MCP Server](https://img.shields.io/badge/MCP-1.6.1-green.svg)](https://quarkiverse.github.io/quarkiverse-docs/quarkus-mcp-server/dev/index.html)
![MCP Server](https://img.shields.io/badge/License-MIT-yellow.svg)

**[ğŸ“– é¡¹ç›®æ–‡æ¡£](#-é¡¹ç›®ä»‹ç») â€¢ [ğŸ”— MCPè¿æ¥](#-MCPè¿æ¥)  [ğŸš€ å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢ [ğŸ“¦ é¡¹ç›®æ„å»º](#-é¡¹ç›®æ„å»º) â€¢ [ğŸ› ï¸ é¡¹ç›®éƒ¨ç½²](#-é¡¹ç›®éƒ¨ç½²) â€¢ [ğŸ”§ äºŒæ¬¡å¼€å‘](#-äºŒæ¬¡å¼€å‘)**

---

## ğŸ“– é¡¹ç›®ä»‹ç»

<div>

### ğŸŒŸ åŸºäºQuarkusçš„è½»é‡çº§Elasticsearch MCPæœåŠ¡

Elasticsearch MCP Server æ˜¯ä¸€ä¸ªåŸºäº [Model Context Protocol (MCP)](https://modelcontextprotocol.io/) æ ‡å‡†çš„é«˜æ€§èƒ½æœåŠ¡å™¨å®ç°ï¼Œä¸“é—¨ä¸ºElasticsearchæ•°æ®æºæä¾›AIåŠ©æ‰‹äº¤äº’èƒ½åŠ›ã€‚æœ¬é¡¹ç›®é‡‡ç”¨ **Quarkusæ¡†æ¶** æ„å»ºï¼Œå…·æœ‰ä»¥ä¸‹æ ¸å¿ƒä¼˜åŠ¿ï¼š

### ğŸš€ æ ¸å¿ƒç‰¹æ€§

| ç‰¹æ€§ | æè¿° |
|------|------|
| **âš¡ å¿«é€Ÿå¯åŠ¨** | åŸºäºQuarkusåŸç”Ÿç¼–è¯‘ï¼Œæ¯«ç§’çº§å¿«é€Ÿå¯åŠ¨ |
| **ğŸ§  ä½å†…å­˜å ç”¨** | ç›¸æ¯”ä¼ ç»ŸSpring Bootåº”ç”¨ï¼Œå†…å­˜ä½¿ç”¨å‡å°‘85%ï¼ŒåŸç”Ÿç¨‹åºè¿è¡Œä»…éœ€è¦9MBï¼ŒéåŸç”Ÿ13MB |
| **ğŸ”„ åŒåè®®æ”¯æŒ** | åŒæ—¶æ”¯æŒSSEå’ŒStreamable HTTPåè®®ï¼Œä¹Ÿå¯ä»¥æ”¯æŒstudio |
| **ğŸ› ï¸ ä¸°å¯Œçš„å·¥å…·é›†** | æä¾›7ç§æ ¸å¿ƒElasticsearchæŸ¥è¯¢å·¥å…· |
| **ğŸŒ äº‘åŸç”Ÿè®¾è®¡** | ä¸“ä¸ºKuberneteså’Œå®¹å™¨åŒ–ç¯å¢ƒä¼˜åŒ–ï¼Œå¦‚æœéäº‘åŸç”Ÿï¼Œç›´æ¥éƒ¨ç½²ä¹Ÿæ˜¯éå¸¸å®¹æ˜“çš„ |
| **ğŸ“¦ å¿«é€Ÿæ‰“åŒ…** | æ”¯æŒJVMå’ŒåŸç”ŸäºŒè¿›åˆ¶ä¸¤ç§éƒ¨ç½²æ¨¡å¼ |

### ğŸ¯ æ”¯æŒçš„å·¥å…·åŠŸèƒ½

- **ğŸ” å¥åº·æ£€æŸ¥** - æŸ¥è¯¢Elasticsearché›†ç¾¤å¥åº·çŠ¶æ€
- **ğŸ“‹ ç´¢å¼•ç®¡ç†** - åˆ—å‡ºæ‰€æœ‰ç´¢å¼•å’Œåˆ«å
- **ğŸ—ºï¸ æ˜ å°„æŸ¥è¯¢** - è·å–ç´¢å¼•çš„mappingä¿¡æ¯
- **ğŸ“ SQLæŸ¥è¯¢** - é€šè¿‡SQLè¯­å¥æŸ¥è¯¢Elasticsearchæ–‡æ¡£
- **ğŸ” DSLæœç´¢** - ä½¿ç”¨Elasticsearch DSLè¿›è¡Œé«˜çº§æœç´¢
- **ğŸ“„ æ–‡æ¡£æŸ¥è¯¢** - é€šè¿‡IDè·å–ç‰¹å®šæ–‡æ¡£
- åç»­åŠŸèƒ½æ ¹æ®å®é™…éœ€æ±‚å’ŒissueæŒç»­æ›´æ–°...

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ğŸ“‹ ç¯å¢ƒè¦æ±‚

- **Java 17+** - æ¨èä½¿ç”¨JDK 17æˆ–æ›´é«˜
- **Maven 3.8+** - é¡¹ç›®æ„å»ºå·¥å…·
- **Elasticsearch 7.x/8.x/9.x** - æ”¯æŒçš„Elasticsearchç‰ˆæœ¬

### ğŸƒâ€â™‚ï¸ ç«‹å³è¿è¡Œ

- é»˜è®¤ä¼šElasticsearchè¿æ¥http://localhost:9200, å¦‚éœ€è¦ä¿®æ”¹è¯·å‚è€ƒï¼š[ğŸ”§ å¿«é€Ÿé…ç½®](#-å¿«é€Ÿé…ç½®)

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/gokeep-projects/elasticsearch-mcp-server.git
cd elasticsearch-mcp-server

# å¼€å‘æ¨¡å¼è¿è¡Œ
./mvnw quarkus:dev

# æ‰“åŒ…åº”ç”¨
./mvnw package
```

### ğŸ”§ å¿«é€Ÿé…ç½®

åœ¨ `src/main/resources/application.properties` ä¸­é…ç½®Elasticsearchè¿æ¥ï¼š

```properties
# Elasticsearchè¿æ¥é…ç½®, hostç¼ºçœä¸ºhttp://localhost:9200ï¼Œusernameå’Œpasswordå¦‚æœéœ€è¦å¯ä»¥é…ç½®
elasticsearch.host=http://localhost:9200
elasticsearch.username=<Your username>
elasticsearch.password=<Your password>
```
### ğŸ”— MCPè¿æ¥

- **streamable:** http://localhost:19000/mcp

- **sse:** http://localhost:19000/mcp/sse

  

---

## ğŸ“¦ é¡¹ç›®æ„å»º

### ğŸ—ï¸ æ„å»ºé€‰é¡¹

æœ¬é¡¹ç›®åŸºäº **Quarkus** æ„å»ºï¼Œæä¾›ä¸¤ç§æ„å»ºæ¨¡å¼ï¼š

#### 1. JVMæ¨¡å¼æ„å»ºï¼ˆå¸¸ç”¨æ„å»ºæ–¹å¼ï¼Œæ— ä»»ä½•å·¥å…·ä¾èµ–ï¼‰

```bash
# æ¸…ç†å¹¶æ‰“åŒ…
./mvnw clean package
æˆ–è€…
mvn clean package

# ç”Ÿæˆçš„æ–‡ä»¶
# target/elasticsearch-mcp-server-1.0.0-runner.jar
# target/lib/ - ä¾èµ–åº“ç›®å½•
```

#### 2. åŸç”Ÿæ¨¡å¼æ„å»ºï¼ˆå¦‚æœéœ€è¦äº‘åŸç”Ÿæˆ–å¯¹æ€§èƒ½æœ‰æè‡´è¦æ±‚ï¼‰

```bash
# åŸç”Ÿé•œåƒæ„å»ºï¼ˆéœ€è¦å®‰è£…GraalVMï¼‰
./mvnw package -Dnative
æˆ–è€…
mvn package -Dnative

# ç”Ÿæˆçš„æ–‡ä»¶
# target/elasticsearch-mcp-server-1.0.0-runner
# ç‰¹ç‚¹ï¼šå¯åŠ¨æ›´å¿«ï¼Œå†…å­˜å ç”¨æ›´ä½
```

### ğŸ“Š æ€§èƒ½å¯¹æ¯”

| æ„å»ºæ¨¡å¼ | å¯åŠ¨æ—¶é—´ | å†…å­˜å ç”¨ | æ–‡ä»¶å¤§å° | é€‚ç”¨åœºæ™¯ |
|---------|---------|---------|---------|---------|
| **JVMæ¨¡å¼** | 2-3ç§’ | â‰ˆ10MB | â‰ˆ22MB | å¼€å‘ç¯å¢ƒ/ç”Ÿäº§ç¯å¢ƒ |
| **åŸç”Ÿæ¨¡å¼** | 1ç§’ | â‰ˆ5MB | â‰ˆ70MB | å¼€å‘ç¯å¢ƒ/ç”Ÿäº§ç¯å¢ƒ |

### ğŸ”§ æ„å»ºé…ç½®

åœ¨ `pom.xml` ä¸­å¯ä»¥è°ƒæ•´æ„å»ºå‚æ•°ï¼š

```xml
<!-- åŸç”Ÿç¼–è¯‘é…ç½® -->
<profile>
    <id>native</id>
    <properties>
        <quarkus.native.enabled>true</quarkus.native.enabled>
        <quarkus.native.additional-build-args>
            -H:ResourceConfigurationFiles=resources-config.json
        </quarkus.native.additional-build-args>
    </properties>
</profile>
```

---

## ğŸ› ï¸ é¡¹ç›®éƒ¨ç½²

### ğŸ³ Dockeréƒ¨ç½²

#### 1. åˆ›å»ºDockerfile

```dockerfile
FROM quay.io/quarkus/ubi-quarkus-native-image:22.3-java17 AS build
COPY --chown=quarkus:quarkus mvnw /code/mvnw
COPY --chown=quarkus:quarkus .mvn /code/.mvn
COPY --chown=quarkus:quarkus pom.xml /code/
USER quarkus
WORKDIR /code
RUN ./mvnw package -Dnative

FROM registry.access.redhat.com/ubi8/ubi-minimal
WORKDIR /work/
COPY --from=build /code/target/*-runner /work/application
RUN chmod 775 /work
EXPOSE 8080
CMD ["./application", "-Dquarkus.http.host=0.0.0.0"]
```

#### 2. æ„å»ºå¹¶è¿è¡Œ

```bash
# æ„å»ºDockeré•œåƒ
docker build -t elasticsearch-mcp-server .

# è¿è¡Œå®¹å™¨
docker run -i --rm \
  -p 8080:8080 \
  -e ELASTICSEARCH_HOST=your-es-server-address \
  -e ELASTICSEARCH_USERNAME=your-es-useranme \
  -e ELASTICSEARCH_PASSWORD=your_password \
  elasticsearch-mcp-server
```

### â˜¸ï¸ Kuberneteséƒ¨ç½²

#### 1. åˆ›å»ºéƒ¨ç½²æ–‡ä»¶

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: elasticsearch-mcp-server
spec:
  replicas: 1
  selector:
    matchLabels:
      app: elasticsearch-mcp-server
  template:
    metadata:
      labels:
        app: elasticsearch-mcp-server
    spec:
      containers:
        - name: elasticsearch-mcp-server
          image: elasticsearch-mcp-server:latest
          ports:
            - containerPort: 8080
          env:
            - name: ELASTICSEARCH_HOST
              value: "elasticsearch-service"
            - name: ELASTICSEARCH_PORT
              value: "9200"
          resources:
            requests:
              memory: "64Mi"
              cpu: "250m"
            limits:
              memory: "128Mi"
              cpu: "500m"
```

#### 2. éƒ¨ç½²åˆ°é›†ç¾¤

```bash
# åº”ç”¨é…ç½®
kubectl apply -f k8s-deployment.yaml

# æ£€æŸ¥çŠ¶æ€
kubectl get pods -l app=elasticsearch-mcp-server
```

### ğŸ–¥ï¸ ä¼ ç»Ÿéƒ¨ç½²

#### 1. JVMæ¨¡å¼éƒ¨ç½²

```bash
# ä¸Šä¼ jaråŒ…å’Œlibç›®å½•åˆ°æœåŠ¡å™¨
scp target/elasticsearch-mcp-server-1.0.0-runner.jar user@server:/opt/
scp -r target/lib user@server:/opt/

# åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œ
java -jar /opt/elasticsearch-mcp-server-1.0.0-runner.jar
```

#### 2. åŸç”Ÿæ¨¡å¼éƒ¨ç½²

```bash
# ä¸Šä¼ åŸç”Ÿå¯æ‰§è¡Œæ–‡ä»¶
scp target/elasticsearch-mcp-server-1.0.0-runner user@server:/opt/

# åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œ
./elasticsearch-mcp-server-1.0.0-runner
```

---

## ğŸ”§ äºŒæ¬¡å¼€å‘

### ğŸ“ é¡¹ç›®ç»“æ„

```
elasticsearch-mcp-server/
â”œâ”€â”€ src/main/java/org/gokeep/elasticsearch/mcp/server/
â”‚   â”œâ”€â”€ basic/           # åŸºç¡€æŠ½è±¡ç±»
â”‚   â”œâ”€â”€ config/          # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ enmus/           # æšä¸¾å®šä¹‰
â”‚   â”œâ”€â”€ router/          # è·¯ç”±å®šä¹‰
â”‚   â””â”€â”€ ElasticsearchMcpServer.java  # ä¸»æœåŠ¡ç±»
â”œâ”€â”€ src/main/resources/
â”‚   â””â”€â”€ application.properties       # é…ç½®æ–‡ä»¶
â”œâ”€â”€ pom.xml              # Mavené…ç½®æ–‡ä»¶
â””â”€â”€ README.md            # é¡¹ç›®æ–‡æ¡£
```

### ğŸ› ï¸ æ·»åŠ æ–°å·¥å…·

è¦æ·»åŠ æ–°çš„Elasticsearchæ“ä½œå·¥å…·ï¼Œåªéœ€åœ¨ `ElasticsearchMcpServer.java` ä¸­æ·»åŠ æ–°æ–¹æ³•ï¼š

```java
@Tool(description = "CN: è‡ªå®šä¹‰Elasticsearchæ“ä½œ\nEN: Custom elasticsearch operation")
public ToolResponse customOperation(
        @ToolArg(description = "å‚æ•°æè¿°") String param) throws Exception {
    // æ„å»ºè¯·æ±‚
    HttpRequest request = buildRequest(Router.CUSTOM_ENDPOINT, param);
    String response = call(request);
    return ToolResponse.success(response);
}
```

ç„¶ååœ¨ `router.Router` ç±»ä¸­æ·»åŠ å¯¹åº”çš„è·¯ç”±å¸¸é‡ã€‚

### ğŸ”„ æ‰©å±•ç¤ºä¾‹

#### æ·»åŠ èšåˆæŸ¥è¯¢å·¥å…·

```java
@Tool(description = "CN: æ‰§è¡ŒElasticsearchèšåˆæŸ¥è¯¢\nEN: Execute elasticsearch aggregation")
public ToolResponse aggregate(
        @ToolArg(description = "ç´¢å¼•å") String indexName,
        @ToolArg(description = "èšåˆæŸ¥è¯¢è¯­å¥") Map<String, Object> aggregation) throws Exception {
    HttpRequest request = buildRequest(Router.AGGREGATE, aggregation, indexName);
    String response = call(request);
    return ToolResponse.success(response);
}
```

#### æ·»åŠ ç´¢å¼•ç®¡ç†å·¥å…·

```java
@Tool(description = "CN: åˆ›å»ºElasticsearchç´¢å¼•\nEN: Create elasticsearch index")
public ToolResponse createIndex(
        @ToolArg(description = "ç´¢å¼•å") String indexName,
        @ToolArg(description = "ç´¢å¼•é…ç½®") Map<String, Object> settings) throws Exception {
    HttpRequest request = buildRequest(Router.CREATE_INDEX, settings, indexName);
    String response = call(request);
    return ToolResponse.success(response);
}
```

### ğŸ“š äºŒæ¬¡å¼€å‘æ–‡æ¡£

#### æ ¸å¿ƒä¾èµ–

- **Quarkus 3.27.0** - æ ¸å¿ƒæ¡†æ¶
- **quarkus-mcp-server-sse 1.6.1** - MCPæœåŠ¡å™¨å®ç°
- **quarkus-rest-client-jackson** - RESTå®¢æˆ·ç«¯
- **Java 17** - ç¼–ç¨‹è¯­è¨€

#### é…ç½®å‚è€ƒ

```properties
# æœåŠ¡å™¨é…ç½®
quarkus.http.port=8080

# Elasticsearché…ç½®
elasticsearch.host=http://localhost:9200
elasticsearch.username=
elasticsearch.password=
```

#### æµ‹è¯•å·¥å…·

```bash
# è¿è¡Œæµ‹è¯•
./mvnw test

# é›†æˆæµ‹è¯•
./mvnw verify

# å¼€å‘æ¨¡å¼ï¼ˆæ”¯æŒçƒ­éƒ¨ç½²ï¼‰
./mvnw quarkus:dev
```

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT]([MIT License](https://mit-license.org/)) è®¸å¯è¯ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ï¼

---

<div align="center">

### â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ªStarï¼

**[ğŸ” å›åˆ°é¡¶éƒ¨](#-elasticsearch-mcp-server)**

</div>